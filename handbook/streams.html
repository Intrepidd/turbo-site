<!doctype html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Turbo Handbook</title>
  <meta name="description" content="Turbo Streams deliver page changes over WebSocket, SSE or in response to form submissions using just HTML and a set of CRUD-like actions.">
  <link rel="canonical" href="https://turbo.hotwire.dev/handbook/streams">

  <link rel="alternate icon" type="image/png" sizes="32x32" href="/assets/favicon-32x32.png">
  <link rel="icon" type="image/svg+xml" href="/assets/favicon.svg">
  <link rel="mask-icon" href="/assets/favicon.svg" color="#000000">
  <link rel="apple-touch-icon" href="/assets/favicon-196x196.png">

  <link rel="preload" href="/assets/fonts/Bitter-Roman.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="/assets/fonts/Bitter-Italic.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="/assets/fonts/Jost-Roman.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="/assets/fonts/Jost-Italic.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="/assets/fonts/RobotoMono-Roman.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="/assets/fonts/RobotoMono-Italic.woff2" as="font" type="font/woff2" crossorigin>

  <link rel="stylesheet" href="/assets/main.css">
  <script src="/assets/main.js" type="module"></script>
  <script async defer data-domain="turbo.hotwired.dev" src="https://plausible.io/js/plausible.js"></script>
</head>


  <body>

    <a class="nav-skip" href="#content">Skip to content</a>

<nav class="jump">
  <ul class="jump__list">
    <li><a class="jump__list-link jump__list-link--hotwire" href="https://hotwired.dev">Hotwire:</a></li>
    <li><a class="jump__list-link jump__list-link--active" href="https://turbo.hotwired.dev">Turbo</a></li>
    <li><a class="jump__list-link" href="https://stimulus.hotwired.dev">Stimulus</a></li>
    <li><span class="jump__list-link jump__list-link--disabled">Strada <span class="jump__list-info">(Coming Soon!)</span></span></li>
  </ul>
</nav>


    
<div class="nav__github-corner">
  <svg width="60" height="60" viewBox="0 0 250 250" version="1.1" xmlns="github-corner"
	style="fill:#000000; color:#FFFFFF;"
	aria-hidden="true">
	<a href="https://github.com/hotwired/turbo-site/blob/main/./_source/handbook/04_streams.md" target="_blank" class="github-corner">
		<path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
		<path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
			fill="#FFFFFF" style="transform-origin: 130px 106px;" class="octo-arm">
		</path>
		<path
			d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="#FFFFFF" class="octo-body">
		</path>
	</a>
</svg>

</div>

<main class="grid docs">

  <header class="docs__index grid__custom-item">
    <a class="nav-logo" href="/" aria-label="Turbo">
  <svg class="logo" width="272" height="60" viewBox="0 0 272 60" xmlns="http://www.w3.org/2000/svg">
  <g class="logo__icon" fill="#5cd8e5">
    <path fill-rule="evenodd" clip-rule="evenodd" d="M58.1679 0H1.84202C1.35348 0 0.884959 0.194069 0.539514 0.539514C0.194069 0.884959 1.99791e-10 1.35348 1.99791e-10 1.84202V9.56853H30C33.6969 9.57105 37.3239 10.5761 40.4948 12.4766C43.6658 14.3771 46.2619 17.102 48.0069 20.3611C49.752 23.6203 50.5805 27.2916 50.4042 30.9843C50.228 34.677 49.0537 38.2527 47.0063 41.3309H59.9502V1.84202C59.953 1.36291 59.7679 0.901773 59.4348 0.557449C59.1016 0.213125 58.6468 0.0130114 58.1679 0ZM9.56853 30C9.56416 25.9673 10.7562 22.024 12.9937 18.6691H1.99791e-10V58.1679C-3.56516e-06 58.4093 0.047712 58.6484 0.140404 58.8713C0.233095 59.0942 0.368935 59.2966 0.540113 59.4669C0.711292 59.6371 0.914433 59.7719 1.13786 59.8634C1.36129 59.9549 1.60059 60.0013 1.84202 60H58.1679C58.6538 60 59.1198 59.8069 59.4634 59.4634C59.8069 59.1198 60 58.6538 60 58.1679V50.4314H30C24.5812 50.4314 19.3844 48.2788 15.5528 44.4472C11.7211 40.6156 9.56853 35.4187 9.56853 30ZM39.1503 30.8662C41.1033 30.6502 43.0207 30.1851 44.8556 29.4822V29.4125C45.3983 29.2447 45.9848 29.2923 46.4933 29.5454C47.0018 29.7985 47.3934 30.2376 47.5868 30.7717C47.7803 31.3058 47.7606 31.8939 47.532 32.4139C47.3034 32.9339 46.8834 33.3459 46.3591 33.5645C43.6881 34.6173 40.8551 35.2001 37.9854 35.2871H37.4776C36.9654 35.9997 36.3554 36.6365 35.6654 37.1789C36.8402 38.3313 38.1392 39.3498 39.5386 40.2157C40.0325 40.5286 40.3817 41.0249 40.5097 41.5954C40.6376 42.1658 40.5336 42.7637 40.2207 43.2575C39.9078 43.7513 39.4115 44.1006 38.841 44.2285C38.2706 44.3564 37.6727 44.2525 37.1789 43.9396C35.0088 42.6157 33.0601 40.9592 31.4039 39.0308C30.9391 39.0994 30.4698 39.1327 30 39.1304H29.1039C29.1745 39.8644 29.2943 40.5929 29.4623 41.311C29.6017 41.9382 29.7809 42.5954 30 43.3023C30.1131 43.7096 30.2434 44.0712 30.3822 44.4564C30.4266 44.5797 30.4719 44.7053 30.5177 44.8357C30.6618 45.2299 30.6896 45.6571 30.5978 46.0666C30.506 46.4762 30.2985 46.8507 30 47.1457C29.7734 47.3718 29.5021 47.5482 29.2034 47.6634C28.9605 47.7498 28.7045 47.7936 28.4467 47.7929C28.0012 47.7962 27.5652 47.6637 27.1969 47.4128C26.8286 47.162 26.5456 46.8048 26.3857 46.389C25.7729 44.7567 25.3032 43.0743 24.9817 41.3607C24.7339 40.092 24.627 38.7997 24.6631 37.5074C23.9549 36.99 23.3187 36.3806 22.7713 35.6953C21.6316 36.8686 20.6294 38.168 19.7843 39.5685C19.582 39.8794 19.3042 40.1338 18.9768 40.3079C18.6494 40.4821 18.2832 40.5702 17.9124 40.5642C17.5171 40.5656 17.1287 40.4604 16.788 40.2598C16.4474 40.0592 16.1671 39.7706 15.9766 39.4242C15.7861 39.0778 15.6924 38.6865 15.7054 38.2914C15.7184 37.8963 15.8376 37.512 16.0504 37.1789C17.3748 35.0033 19.0348 33.0509 20.9691 31.3939C20.8973 30.9327 20.8607 30.4667 20.8596 30C20.8596 29.8506 20.872 29.7013 20.8845 29.5519C20.8969 29.4026 20.9094 29.2532 20.9094 29.1039C18.9245 29.3268 16.9767 29.8054 15.1145 30.5277C14.5652 30.7284 13.9587 30.7027 13.4284 30.4562C12.8981 30.2097 12.4874 29.7627 12.2868 29.2134C12.0861 28.6641 12.1118 28.0576 12.3583 27.5273C12.6047 26.997 13.0518 26.5863 13.6011 26.3856C16.4269 25.2464 19.4456 24.6616 22.4925 24.6631C23.0044 23.9502 23.6145 23.3133 24.3047 22.7713C23.1257 21.634 21.8232 20.6321 20.4215 19.7843C19.9525 19.4598 19.6271 18.9666 19.5133 18.4077C19.3994 17.8489 19.506 17.2677 19.8107 16.7856C20.1154 16.3035 20.5946 15.9579 21.1482 15.8208C21.7018 15.6838 22.2869 15.7661 22.7813 16.0504C24.9578 17.3774 26.9132 19.0371 28.5762 20.9691C29.3334 20.847 30.1036 20.8269 30.8662 20.9094C30.8067 20.1435 30.7003 19.3821 30.5476 18.6293C30.3983 18.0119 30.219 17.3448 30 16.6379C29.8506 16.1102 29.6814 15.6422 29.4822 15.1145C29.3398 14.7185 29.3128 14.2901 29.4045 13.8794C29.4962 13.4687 29.7027 13.0924 30 12.7945C30.2264 12.5657 30.5023 12.392 30.8065 12.2867C31.0784 12.1868 31.3674 12.1415 31.6569 12.1534C31.9464 12.1654 32.2306 12.2345 32.4934 12.3566C32.7561 12.4787 32.9921 12.6515 33.1879 12.865C33.3837 13.0786 33.5354 13.3287 33.6342 13.6011C34.2424 15.2348 34.712 16.9168 35.0382 18.6293C35.2785 19.9023 35.382 21.1974 35.3468 22.4925C36.0614 22.9984 36.6987 23.6054 37.2386 24.2947C38.3932 23.1218 39.4119 21.8225 40.2755 20.4215C40.5884 19.9277 41.0847 19.5784 41.6551 19.4505C42.2256 19.3226 42.8235 19.4265 43.3173 19.7394C43.8111 20.0524 44.1604 20.5486 44.2883 21.1191C44.4162 21.6896 44.3122 22.2874 43.9993 22.7813C42.6753 24.9542 41.019 26.9062 39.0906 28.5662C39.1993 29.328 39.2194 30.0998 39.1503 30.8662ZM34.8988 30.3983V30H34.9386C34.9245 29.0863 34.6593 28.1941 34.1719 27.4212C34.043 27.2069 33.8965 27.0037 33.7338 26.8138C33.053 26.0132 32.1364 25.4486 31.1152 25.2008C30.8665 25.1408 30.6135 25.1009 30.3584 25.0813H29.9602C29.0503 25.0834 28.1584 25.3348 27.3813 25.8081C27.1675 25.9461 26.9615 26.0957 26.764 26.2562C25.9671 26.9384 25.4061 27.8549 25.161 28.8749C25.101 29.1201 25.061 29.3699 25.0415 29.6216V30.0199C25.0435 30.9298 25.2949 31.8217 25.7683 32.5987C25.9039 32.8142 26.0536 33.0204 26.2164 33.216C26.6345 33.7126 27.1476 34.1208 27.7255 34.4165C28.3033 34.7123 28.9345 34.8898 29.5818 34.9386H29.9801C30.89 34.9365 31.7819 34.6851 32.5589 34.2117C32.7732 34.0829 32.9764 33.9363 33.1663 33.7736C33.6658 33.3552 34.0765 32.841 34.3741 32.2612C34.6716 31.6815 34.85 31.0481 34.8988 30.3983Z"/>
  </g>
  <g class="logo__wordmark" fill="#000">
    <path fill-rule="evenodd" clip-rule="evenodd" d="M268.982 7.97267C269.989 8.76001 270.713 9.85401 271.043 11.0892C271.46 12.7535 271.484 14.492 271.113 16.1672L266.234 43.8173C265.97 45.6712 265.366 47.4604 264.452 49.0945C263.694 50.4052 262.636 51.5176 261.365 52.3404C260.048 53.1548 258.588 53.7123 257.064 53.9833C255.269 54.3001 253.449 54.4534 251.627 54.4413H240.197C238.424 54.4584 236.653 54.305 234.91 53.9833C233.563 53.754 232.296 53.189 231.226 52.3404C230.254 51.4971 229.589 50.3557 229.334 49.0945C229.001 47.3494 229.018 45.5558 229.384 43.8173L234.213 16.1672C234.497 14.3769 235.112 12.6551 236.025 11.0892C236.792 9.81721 237.854 8.74836 239.121 7.97267C240.433 7.18749 241.883 6.66028 243.393 6.4194C245.13 6.13052 246.889 5.99062 248.65 6.00121H260.081C261.806 5.98533 263.528 6.12529 265.228 6.4194C266.586 6.6278 267.874 7.16062 268.982 7.97267ZM243.373 42.3039H252.702L256.964 18.1585H247.634L243.373 42.3039ZM185.484 8.71942C186.479 9.55948 187.177 10.6976 187.475 11.9653C187.838 13.699 187.838 15.4889 187.475 17.2226L185.892 26.4227C185.674 27.6412 185.317 28.8305 184.827 29.9673C184.405 30.9394 183.833 31.8397 183.134 32.6358C182.466 33.3839 181.67 34.0075 180.784 34.4778C179.866 34.97 178.902 35.3734 177.907 35.6826H177.508L184.369 53.9036H169.324L164.087 37.7138H162.185L159.387 53.9036H145.656L153.861 6.56874H176.612C178.35 6.54946 180.085 6.70961 181.79 7.04667C183.14 7.29357 184.408 7.86796 185.484 8.71942ZM172.48 25.1283L173.416 19.9906H173.366C173.43 19.6929 173.444 19.3866 173.406 19.0845C173.36 18.8351 173.25 18.6019 173.088 18.4074C172.907 18.2171 172.686 18.0706 172.44 17.9793C172.12 17.8703 171.783 17.8198 171.445 17.8299H165.66L164.007 27.3288H169.782C170.119 27.3296 170.455 27.2793 170.778 27.1794C171.071 27.0894 171.345 26.9441 171.584 26.7513C171.825 26.5702 172.019 26.3348 172.152 26.0642C172.288 25.7624 172.398 25.4492 172.48 25.1283ZM133.708 6.56873L127.485 42.3039H119.37L125.593 6.56873H111.873L105.381 43.9268C104.995 45.6719 104.965 47.4767 105.291 49.2338C105.554 50.4987 106.234 51.6385 107.223 52.4698C108.308 53.3016 109.585 53.8461 110.937 54.0529C112.653 54.3514 114.393 54.4947 116.134 54.4811H126.37C128.181 54.492 129.99 54.3488 131.777 54.0529C133.295 53.8163 134.751 53.278 136.058 52.4698C137.323 51.6474 138.377 50.5389 139.135 49.2338C140.054 47.5886 140.668 45.7906 140.947 43.9268L147.439 6.56873H133.708ZM108.189 6.5787H73.0909L71 18.5767H81.6837L75.5304 53.9036H89.2509L95.4042 18.5767H106.088L108.189 6.5787ZM229.165 12.2342C228.926 10.9719 228.303 9.81408 227.382 8.91857C226.399 8.04609 225.216 7.43038 223.937 7.12633C222.344 6.73568 220.708 6.54833 219.068 6.56875H195.172L186.957 53.9036H211.372C213.074 53.9187 214.772 53.7315 216.43 53.346C217.889 52.9984 219.27 52.3803 220.502 51.5239C221.737 50.6396 222.758 49.4896 223.489 48.1585C224.34 46.5638 224.916 44.8369 225.192 43.0506L225.7 39.9341C225.912 38.7646 226.019 37.5782 226.018 36.3895C226.029 35.3715 225.857 34.3598 225.51 33.4025C225.198 32.5554 224.69 31.7944 224.027 31.1821C223.259 30.5156 222.365 30.011 221.398 29.6985C222.397 29.3452 223.34 28.8489 224.196 28.2249C225.003 27.6366 225.715 26.9281 226.307 26.124C226.904 25.3167 227.39 24.4325 227.751 23.4954C228.139 22.4536 228.426 21.3765 228.607 20.2793L229.155 17.2923C229.466 15.621 229.47 13.9067 229.165 12.2342ZM212.367 37.4748L211.73 41.0593C211.673 41.4561 211.566 41.8442 211.411 42.2143C211.279 42.5298 211.079 42.8121 210.824 43.0407C210.555 43.2632 210.243 43.4292 209.908 43.5286C209.491 43.6479 209.058 43.7049 208.624 43.6978H202.47L204.023 34.8064H210.177C210.533 34.7551 210.896 34.783 211.24 34.8879C211.584 34.9929 211.901 35.1724 212.168 35.4137C212.338 35.7265 212.442 36.0701 212.477 36.4241C212.511 36.7781 212.474 37.1354 212.367 37.4748ZM215.245 19.3832L214.767 22.3703C214.696 22.8051 214.572 23.2297 214.399 23.6348C214.267 23.9509 214.066 24.2333 213.811 24.4612C213.543 24.6828 213.23 24.8456 212.895 24.9391C212.471 25.0576 212.031 25.1146 211.591 25.1084H205.746L207.17 16.7845H213.015C213.439 16.7758 213.862 16.8329 214.269 16.9537C214.563 17.0445 214.826 17.2172 215.026 17.4516C215.203 17.6856 215.31 17.9654 215.334 18.2581C215.346 18.6368 215.306 19.0154 215.215 19.3832H215.245Z"/>
  </g>
</svg>

</a>

<input type="checkbox" id="hamburger" class="nav-checkbox"/>
<label class="nav-mobile-button" for="hamburger"><span></span> Menu</label>

<nav class="nav">

  <label class="nav-mobile-button nav-mobile-button--close" for="hamburger"><span></span> close</label>

  <ul class="nav__list ">
    <li>
      <a class="nav__list-link active" href="/handbook/introduction">Handbook</a>

      <ul class="nav__sublist  active"><li>
      <a class="nav__sublist-link" href="/handbook/introduction">1: Introduction
      </a>
    </li><li>
      <a class="nav__sublist-link" href="/handbook/drive">2: Navigate with Turbo Drive
      </a>
    </li><li>
      <a class="nav__sublist-link" href="/handbook/frames">3: Decompose with Turbo Frames
      </a>
    </li><li>
      <a class="nav__sublist-link active" href="/handbook/streams">4: Come Alive with Turbo Streams
      </a>
    </li><li>
      <a class="nav__sublist-link" href="/handbook/native">5: Go Native on iOS &amp; Android
      </a>
    </li><li>
      <a class="nav__sublist-link" href="/handbook/building">6: Building Your Turbo Application
      </a>
    </li><li>
      <a class="nav__sublist-link" href="/handbook/installing">7: Installing Turbo in Your Application
      </a>
    </li></ul>

    </li>
    <li>
      <a class="nav__list-link" href="/reference/drive">Reference</a>

      <ul class="nav__sublist "><li>
      <a class="nav__sublist-link" href="/reference/drive">Drive
      </a>
    </li><li>
      <a class="nav__sublist-link" href="/reference/frames">Frames
      </a>
    </li><li>
      <a class="nav__sublist-link" href="/reference/streams">Streams
      </a>
    </li><li>
      <a class="nav__sublist-link" href="/reference/events">Events
      </a>
    </li><li>
      <a class="nav__sublist-link" href="/reference/attributes">Attributes
      </a>
    </li></ul>

    </li>
    <li>
      <a class="nav__list-link" href="https://discuss.hotwire.dev" title="Have a question? Connect with other developers on the Hotwire Discourse community forum.">Community</a>
    </li>
    <li>
      <a class="nav__list-link" href="https://github.com/hotwired/turbo" title="Head over to GitHub for code, bug reports, and pull requests.">Source Code</a>
    </li>
  </ul>

</nav>

  </header>

  <section id="content" class="docs__content grid__custom-item">

    <h1>Come Alive with Turbo Streams</h1>
<p>Turbo Streams deliver page changes as fragments of HTML wrapped in self-executing <code>&lt;turbo-stream&gt;</code> elements. Each stream element specifies an action together with a target ID to declare what should happen to the HTML inside it. These elements are delivered by the server over a WebSocket, SSE or other transport to bring the application alive with updates made by other users or processes. A new email arriving in your <a href="http://itsnotatypo.com">imbox</a> is a great example.</p>
<h2 id="stream-messages-and-actions"><a class="anchor" href="#stream-messages-and-actions">﹟</a> Stream Messages and Actions</h2>
<p>A Turbo Streams message is a fragment of HTML consisting of <code>&lt;turbo-stream&gt;</code> elements. The stream message below demonstrates the seven possible stream actions:</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>turbo-stream</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>append<span class="token punctuation">"</span></span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>messages<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>message_1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>      This div will be appended to the element with the DOM ID "messages".<br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>turbo-stream</span><span class="token punctuation">></span></span><br><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>turbo-stream</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>prepend<span class="token punctuation">"</span></span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>messages<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>message_1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>      This div will be prepended to the element with the DOM ID "messages".<br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>turbo-stream</span><span class="token punctuation">></span></span><br><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>turbo-stream</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>replace<span class="token punctuation">"</span></span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>message_1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>message_1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>      This div will replace the existing element with the DOM ID "message_1".<br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>turbo-stream</span><span class="token punctuation">></span></span><br><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>turbo-stream</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>update<span class="token punctuation">"</span></span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>unread_count<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span><br>    <span class="token comment">&lt;!-- The contents of this template will replace the<br>    contents of the element with ID "unread_count" by<br>    setting innerHtml to "" and then switching in the<br>    template contents. Any handlers bound to the element<br>    "unread_count" would be retained. This is to be<br>    contrasted with the "replace" action above, where<br>    that action would necessitate the rebuilding of<br>    handlers. --></span><br>    1<br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>turbo-stream</span><span class="token punctuation">></span></span><br><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>turbo-stream</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>remove<span class="token punctuation">"</span></span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>message_1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  <span class="token comment">&lt;!-- The element with DOM ID "message_1" will be removed.<br>  The contents of this stream element are ignored. --></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>turbo-stream</span><span class="token punctuation">></span></span><br><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>turbo-stream</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>before<span class="token punctuation">"</span></span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>current_step<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span><br>    <span class="token comment">&lt;!-- The contents of this template will be added before the<br>    the element with ID "current_step". --></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>New item<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>turbo-stream</span><span class="token punctuation">></span></span><br><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>turbo-stream</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>after<span class="token punctuation">"</span></span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>current_step<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span><br>    <span class="token comment">&lt;!-- The contents of this template will be added after the<br>    the element with ID "current_step". --></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>New item<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>turbo-stream</span><span class="token punctuation">></span></span></code></pre>
<p>Note that every <code>&lt;turbo-stream&gt;</code> element must wrap its included HTML inside a <code>&lt;template&gt;</code> element.</p>
<p>A Turbo Stream can integrate with any element in the document that can be
resolved by an <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/id">id</a> attribute or <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors">CSS selector</a> (with the exception of <code>&lt;template&gt;</code> element or <code>&lt;iframe&gt;</code> element content). It is not necessary to change targeted elements into <a href="/handbook/frames"><code>&lt;turbo-frame&gt;</code> elements</a>. If your application utilizes <code>&lt;turbo-frame&gt;</code> elements for the sake of a <code>&lt;turbo-stream&gt;</code> element, change the <code>&lt;turbo-frame&gt;</code> into another <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element">built-in element</a>.</p>
<p>You can render any number of stream elements in a single stream message from a WebSocket, SSE or in response to a form submission.</p>
<h2 id="actions-with-multiple-targets"><a class="anchor" href="#actions-with-multiple-targets">﹟</a> Actions With Multiple Targets</h2>
<p>Actions can be applied against multiple targets using the <code>targets</code> attribute with a CSS query selector, instead of the regular <code>target</code> attribute that uses a dom ID reference. Examples:</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>turbo-stream</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>remove<span class="token punctuation">"</span></span> <span class="token attr-name">targets</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>.old_records<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  <span class="token comment">&lt;!-- The element with the class "old_records" will be removed.<br>  The contents of this stream element are ignored. --></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>turbo-stream</span><span class="token punctuation">></span></span><br><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>turbo-stream</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>after<span class="token punctuation">"</span></span> <span class="token attr-name">targets</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>input.invalid_field<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span><br>    <span class="token comment">&lt;!-- The contents of this template will be added after the<br>    all elements that match "inputs.invalid_field". --></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>Incorrect<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>turbo-stream</span><span class="token punctuation">></span></span></code></pre>
<h2 id="streaming-from-http-responses"><a class="anchor" href="#streaming-from-http-responses">﹟</a> Streaming From HTTP Responses</h2>
<p>Turbo knows to automatically attach <code>&lt;turbo-stream&gt;</code> elements when they arrive in response to <code>&lt;form&gt;</code> submissions that declare a <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types">MIME type</a> of <code>text/vnd.turbo-stream.html</code>. When submitting a <code>&lt;form&gt;</code> element whose <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/form#attr-method">method</a> attribute is set to <code>POST</code>, <code>PUT</code>, <code>PATCH</code>, or <code>DELETE</code>, Turbo injects <code>text/vnd.turbo-stream.html</code> into the set of response formats in the request’s <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept">Accept</a> header. When responding to requests containing that value in its <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept">Accept</a> header, servers can tailor their responses to deal with Turbo Streams, HTTP redirects, or other types of clients that don’t support streams (such as native applications).</p>
<p>In a Rails controller, this would look like:</p>
<pre class="language-ruby"><code class="language-ruby"><span class="token keyword">def</span> <span class="token method-definition"><span class="token function">destroy</span></span><br>  <span class="token variable">@message</span> <span class="token operator">=</span> Message<span class="token punctuation">.</span>find<span class="token punctuation">(</span>params<span class="token punctuation">[</span><span class="token symbol">:id</span><span class="token punctuation">]</span><span class="token punctuation">)</span><br>  <span class="token variable">@message</span><span class="token punctuation">.</span>destroy<br><br>  respond_to <span class="token keyword">do</span> <span class="token operator">|</span>format<span class="token operator">|</span><br>    format<span class="token punctuation">.</span>turbo_stream <span class="token punctuation">{</span> render turbo_stream<span class="token operator">:</span> turbo_stream<span class="token punctuation">.</span>remove<span class="token punctuation">(</span><span class="token variable">@message</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><br>    format<span class="token punctuation">.</span>html         <span class="token punctuation">{</span> redirect_to messages_url <span class="token punctuation">}</span><br>  <span class="token keyword">end</span><br><span class="token keyword">end</span></code></pre>
<p>By default, Turbo doesn’t add the <code>text/vnd.turbo-stream.html</code> MIME type when submitting links, or forms with a method type of <code>GET</code>. To use Turbo Streams responses with <code>GET</code> requests in an application you can instruct Turbo to include the MIME type by adding a <code>data-turbo-stream</code> attribute to a link or form.</p>
<h2 id="reusing-server-side-templates"><a class="anchor" href="#reusing-server-side-templates">﹟</a> Reusing Server-Side Templates</h2>
<p>The key to Turbo Streams is the ability to reuse your existing server-side templates to perform live, partial page changes. The HTML template used to render each message in a list of such on the first page load is the same template that’ll be used to add one new message to the list dynamically later. This is at the essence of the HTML-over-the-wire approach: You don’t need to serialize the new message as JSON, receive it in JavaScript, render a client-side template. It’s just the standard server-side templates reused.</p>
<p>Another example from how this would look in Rails:</p>
<pre class="language-erb"><code class="language-erb"><span class="token comment">&lt;!-- app/views/messages/_message.html.erb --></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token erb language-erb"><span class="token delimiter punctuation">&lt;%=</span><span class="token ruby language-ruby"> dom_id message </span><span class="token delimiter punctuation">%></span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  <span class="token erb language-erb"><span class="token delimiter punctuation">&lt;%=</span><span class="token ruby language-ruby"> message<span class="token punctuation">.</span>content </span><span class="token delimiter punctuation">%></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br><br><span class="token comment">&lt;!-- app/views/messages/index.html.erb --></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>All the messages<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><br><span class="token erb language-erb"><span class="token delimiter punctuation">&lt;%=</span><span class="token ruby language-ruby"> render partial<span class="token operator">:</span> <span class="token string-literal"><span class="token string">"messages/message"</span></span><span class="token punctuation">,</span> <span class="token symbol">collection</span><span class="token operator">:</span> <span class="token variable">@messages</span> </span><span class="token delimiter punctuation">%></span></span></code></pre>
<pre class="language-ruby"><code class="language-ruby"><span class="token comment"># app/controllers/messages_controller.rb</span><br><span class="token keyword">class</span> <span class="token class-name">MessagesController</span> <span class="token operator">&lt;</span> ApplicationController<br>  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">index</span></span><br>    <span class="token variable">@messages</span> <span class="token operator">=</span> Message<span class="token punctuation">.</span>all<br>  <span class="token keyword">end</span><br><br>  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">create</span></span><br>    message <span class="token operator">=</span> Message<span class="token punctuation">.</span>create<span class="token operator">!</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span><span class="token keyword">require</span><span class="token punctuation">(</span><span class="token symbol">:message</span><span class="token punctuation">)</span><span class="token punctuation">.</span>permit<span class="token punctuation">(</span><span class="token symbol">:content</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br><br>    respond_to <span class="token keyword">do</span> <span class="token operator">|</span>format<span class="token operator">|</span><br>      format<span class="token punctuation">.</span>turbo_stream <span class="token keyword">do</span><br>        render turbo_stream<span class="token operator">:</span> turbo_stream<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token symbol">:messages</span><span class="token punctuation">,</span> <span class="token symbol">partial</span><span class="token operator">:</span> <span class="token string-literal"><span class="token string">"messages/message"</span></span><span class="token punctuation">,</span><br>          <span class="token symbol">locals</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token symbol">message</span><span class="token operator">:</span> message <span class="token punctuation">}</span><span class="token punctuation">)</span><br>      <span class="token keyword">end</span><br><br>      format<span class="token punctuation">.</span>html <span class="token punctuation">{</span> redirect_to messages_url <span class="token punctuation">}</span><br>    <span class="token keyword">end</span><br>  <span class="token keyword">end</span><br><span class="token keyword">end</span></code></pre>
<p>When the form to create a new message submits to the <code>MessagesController#create</code> action, the very same partial template that was used to render the list of messages in <code>MessagesController#index</code> is used to render the turbo-stream action. This will come across as a response that looks like this:</p>
<pre class="language-html"><code class="language-html">Content-Type: text/vnd.turbo-stream.html; charset=utf-8<br><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>turbo-stream</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>append<span class="token punctuation">"</span></span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>messages<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>message_1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>      The content of the message.<br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>turbo-stream</span><span class="token punctuation">></span></span></code></pre>
<p>This <code>messages/message</code> template partial can then also be used to re-render the message following an edit/update operation. Or to supply new messages created by other users over a WebSocket or a SSE connection. Being able to reuse the same templates across the whole spectrum of use is incredibly powerful, and key to reducing the amount of work it takes to create these modern, fast applications.</p>
<h2 id="progressively-enhance-when-necessary"><a class="anchor" href="#progressively-enhance-when-necessary">﹟</a> Progressively Enhance When Necessary</h2>
<p>It’s good practice to start your interaction design without Turbo Streams. Make the entire application work as it would if Turbo Streams were not available, then layer them on as a level-up. This means you won’t come to rely on the updates for flows that need to work in native applications or elsewhere without them.</p>
<p>The same is especially true for WebSocket updates. On poor connections, or if there are server issues, your WebSocket may well get disconnected. If the application is designed to work without it, it’ll be more resilient.</p>
<h2 id="but-what-about-running-javascript%3F"><a class="anchor" href="#but-what-about-running-javascript%3F">﹟</a> But What About Running JavaScript?</h2>
<p>Turbo Streams consciously restricts you to seven actions: append, prepend, (insert) before, (insert) after, replace, update, and remove. If you want to trigger additional behavior when these actions are carried out, you should attach behavior using <a href="https://stimulus.hotwired.dev">Stimulus</a> controllers. This restriction allows Turbo Streams to focus on the essential task of delivering HTML over the wire, leaving additional logic to live in dedicated JavaScript files.</p>
<p>Embracing these constraints will keep you from turning individual responses in a jumble of behaviors that cannot be reused and which make the app hard to follow. The key benefit from Turbo Streams is the ability to reuse templates for initial rendering of a page through all subsequent updates.</p>
<h2 id="custom-actions"><a class="anchor" href="#custom-actions">﹟</a> Custom Actions</h2>
<p>By default, Turbo Streams support <a href="/reference/streams#the-seven-actions">seven values for its <code>action</code> attribute</a>. If your application needs to support other behaviors, you can override the <code>event.detail.render</code> function.</p>
<p>For example, if you’d like to expand upon the seven actions to support <code>&lt;turbo-stream&gt;</code> elements with <code>[action=&quot;alert&quot;]</code> or <code>[action=&quot;log&quot;]</code>, you could declare a <code>turbo:before-stream-render</code> listener to provide custom behavior:</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"turbo:before-stream-render"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> fallbackToDefaultActions <span class="token operator">=</span> event<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>render<br><br>  event<span class="token punctuation">.</span>detail<span class="token punctuation">.</span><span class="token function-variable function">render</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">streamElement</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>streamElement<span class="token punctuation">.</span>action <span class="token operator">==</span> <span class="token string">"alert"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token comment">// ...</span><br>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>streamElement<span class="token punctuation">.</span>action <span class="token operator">==</span> <span class="token string">"log"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token comment">// ...</span><br>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>      <span class="token function">fallbackToDefaultActions</span><span class="token punctuation">(</span>streamElement<span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre>
<p>In addition to listening for <code>turbo:before-stream-render</code> events, applications
can also declare actions as properties directly on <code>StreamActions</code>:</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> StreamActions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@hotwired/turbo"</span><br><br><span class="token comment">// &lt;turbo-stream action="log" message="Hello, world">&lt;/turbo-stream></span><br><span class="token comment">//</span><br>StreamActions<span class="token punctuation">.</span><span class="token function-variable function">log</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"message"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br><span class="token punctuation">}</span></code></pre>
<h2 id="integration-with-server-side-frameworks"><a class="anchor" href="#integration-with-server-side-frameworks">﹟</a> Integration with Server-Side Frameworks</h2>
<p>Of all the techniques that are included with Turbo, it’s with Turbo Streams you’ll see the biggest advantage from close integration with your backend framework. As part of the official Hotwire suite, we’ve created a reference implementation for what such an integration can look like in the <a href="https://github.com/hotwired/turbo-rails">turbo-rails gem</a>. This gem relies on the built-in support for both WebSockets and asynchronous rendering present in Rails through the Action Cable and Active Job frameworks, respectively.</p>
<p>Using the <a href="https://github.com/hotwired/turbo-rails/blob/main/app/models/concerns/turbo/broadcastable.rb">Broadcastable</a> concern mixed into Active Record, you can trigger WebSocket updates directly from your domain model. And using the <a href="https://github.com/hotwired/turbo-rails/blob/main/app/models/turbo/streams/tag_builder.rb">Turbo::Streams::TagBuilder</a>, you can render <code>&lt;turbo-stream&gt;</code> elements in inline controller responses or dedicated templates, invoking the five actions with associated rendering through a simple DSL.</p>
<p>Turbo itself is completely backend-agnostic, though. So we encourage other frameworks in other ecosystems to look at the reference implementation provided for Rails to create their own tight integration.</p>
<p>Turbo’s <code>&lt;turbo-stream-source&gt;</code> custom element connects to a stream source
through its <code>[src]</code> attribute. When declared with an <code>ws://</code> or <code>wss://</code> URL,
the underlying stream source will be a <a href="https://developer.mozilla.org/en-US/docs/Web/API/WebSocket">WebSocket</a> instance. Otherwise, the
connection is through an <a href="https://developer.mozilla.org/en-US/docs/Web/API/EventSource">EventSource</a>.</p>
<p>When the element is connected to the document, the stream source is
connected. When the element is disconnected, the stream is disconnected.</p>
<p>Since the document’s <code>&lt;head&gt;</code> is persistent across Turbo navigations, it’s
important to mount the <code>&lt;turbo-stream-source&gt;</code> as a descendant of the document’s
<code>&lt;body&gt;</code> element.</p>
<p>Typical full page navigations driven by Turbo will result in the <code>&lt;body&gt;</code> being
discarded and replaced with the resulting document. It’s the server’s
responsibility to ensure that the element is present on any page that requires
streaming.</p>
<p>Alternatively, a straightforward way to integrate any backend application with Turbo Streams is to rely on <a href="https://mercure.rocks">the Mercure protocol</a>. Mercure defines a convenient way for server applications to broadcast page changes to every connected clients through <a href="https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events">Server-Sent Events (SSE)</a>. <a href="https://mercure.rocks/docs/ecosystem/hotwire">Learn how to use Mercure with Turbo Streams</a>.</p>
<p><a class="button" href="/handbook/native">Next: Go Native on iOS &amp; Android</a></p></section>

  <footer class="docs__footer grid__item grid__item--start-4 grid__item--span-8">

    <footer class="footer">
  <p class="footer__headline">Brought to you by the makers of:</p>
  <ul class="footer__links">
    <li><a href="https://basecamp.com" target="_blank" rel="noopener"><img width="253" height="56" src="/assets/logo-basecamp.svg" alt="Basecamp"></a></li>
    <li><span>and</span></li>
    <li><a href="https://hey.com" target="_blank" rel="noopener"><img width="122" height="56" src="/assets/logo-hey.svg" alt="HEY"></a></li>
  </ul>
  <p class="footer__copyright">&copy; 2023 <a href="https://37signals.com" target="_blank" rel="noopener">37signals</a></p>
</footer>


  </footer>

</main>


  </body>

</html>
